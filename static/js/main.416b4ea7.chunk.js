(this.webpackJsonpgetmiles_challenge=this.webpackJsonpgetmiles_challenge||[]).push([[0],{33:function(e,a,t){e.exports=t(60)},38:function(e,a,t){},60:function(e,a,t){"use strict";t.r(a);var n=t(1),l=t.n(n),r=t(21),c=t.n(r),s=(t(38),t(11)),i=t(12),o=t(22),u=t(14),m=t(13),d=t(16),h=t(28);h.initializeApp({apiKey:"AIzaSyDptY8u9pH9oWlFgCgo5jej1oEX-aK-_rc",authDomain:"getmiles-challenge-242df.firebaseapp.com",databaseURL:"https://getmiles-challenge-242df.firebaseio.com",projectId:"getmiles-challenge-242df",storageBucket:"getmiles-challenge-242df.appspot.com",messagingSenderId:"812438241735",appId:"1:812438241735:web:1f65cd358bccc2851199e2"});var g=h,E=t(61),v=t(62),f=t(63),p=t(64),b=t(65),C=t(66),y=t(67),k=t(84),O=t(68),j=t(69),N=t(70),_=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(){var e;return Object(s.a)(this,t),(e=a.call(this))._handleChange=function(a){e.setState(Object(d.a)({},a.target.name,a.target.value))},e._saveList=function(){if(""===e.state.listName)alert("List cannot be empty");else{var a=g.database().ref("lists/").push().key;g.database().ref("lists/").update(Object(d.a)({},a,{listName:e.state.listName})),e.setState({listName:""})}},e._saveCard=function(a,t){if(""===e.state.cardName)alert("Card cannot be empty");else{var n=g.database().ref("cards/").push().key;g.database().ref("cards/").update(Object(d.a)({},n,{listKey:a.key,cardName:t.title})),e.setState({cardName:""})}},e._handleDeleteList=function(a){for(var t=e.state.dataCards,n=0,l=0;l<t.length;l++)a===t[l].listKey&&n++;if(console.log("countCardOnList: "+n),n>0)for(var r=0;r<t.length;r++)a===t[r].listKey&&e._handleDeleteCard(t[r].key);g.database().ref("lists/".concat(a)).remove(),console.log("Success delete List"),1===e.state.dataLists.length&&e.setState({dataLists:[]})},e._handleDeleteCard=function(a){g.database().ref("cards/".concat(a)).remove(),console.log("Success delete Card");var t=e.state.dataCards.length;console.log(t),1===t&&e.setState({dataCards:[]})},e._handleMoveCard=function(a,t){for(var n,l=e.state,r=l.dataCards,c=l.dataLists[t].key,s=0;s<r.length;s++)a===r[s].key&&(n=s);var i=r[n];g.database().ref("cards/").update(Object(d.a)({},i.key,{listKey:c,cardName:i.cardName}))},e._handleChooseCard=function(a){for(var t,n=e.state.dataCards,l=0;l<n.length;l++)a===n[l].key&&(t=l);var r=n[t];e.setState({editCardName:r.cardName,keyCard:a,keyList:r.listKey})},e._handleEdit=function(){var a=e.state,t=a.editCardName,n=a.keyCard,l=a.keyList;""!==t?g.database().ref("cards/").update(Object(d.a)({},n,{cardName:t,listKey:l})):alert("Card cannot be empty")},e.toggle=function(){e.setState((function(e){return{editing:!e.editing}}))},e.state={listName:"",cardName:"",editCardName:"",keyCard:"",keyList:"",inputKey:"",dataLists:[],dataCards:[],editing:!1},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.database().ref("lists/").on("value",(function(a){var t=a.val();if(null===t)console.log("List at our firebase is null");else{var n=Object.keys(a.val()).map((function(e){return{key:e,listName:t[e].listName}}));e.setState({dataLists:n})}})),g.database().ref("cards/").on("value",(function(a){var t=a.val();if(null===t)console.log("Card at our firebase is null");else{var n=Object.keys(a.val()).map((function(e){return{key:e,cardName:t[e].cardName,listKey:t[e].listKey}}));e.setState({dataCards:n})}}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(E.a,null,this.state.dataLists.map((function(a,t){var n=e.state.dataCards.filter((function(e){return e.listKey===a.key}));return l.a.createElement("div",{key:t},l.a.createElement(v.a,{sm:"2.5"},l.a.createElement(f.a,null,l.a.createElement(p.a,null,a.listName,l.a.createElement(b.a,{onClick:function(){e._handleDeleteList(a.key)},close:!0})," "," "),n.map((function(a,n){return l.a.createElement(C.a,{key:n},l.a.createElement("div",null,l.a.createElement(y.a,null,a.cardName,l.a.createElement(b.a,{onClick:function(){e._handleDeleteCard(a.key)},close:!0})),t>=1?l.a.createElement(b.a,{onClick:function(){e._handleMoveCard(a.key,t-1)}},"Left"):l.a.createElement(b.a,{disabled:!0},"Left")," ",l.a.createElement(b.a,{onClick:function(){e._handleChooseCard(a.key),e.toggle()}},"Edit")," "," ",l.a.createElement(k.a,{isOpen:e.state.editing,toggle:e.toggle,className:e.props.className},l.a.createElement(O.a,null,l.a.createElement("input",{type:"text",name:"editCardName",value:e.state.editCardName,onChange:e._handleChange})),l.a.createElement(j.a,null,l.a.createElement(b.a,{onClick:function(){e._handleEdit(),e.toggle()}},"Edit")," "," ",l.a.createElement(b.a,{color:"secondary",onClick:e.toggle},"Cancel"))),t<e.state.dataLists.length-1?l.a.createElement(b.a,{onClick:function(){e._handleMoveCard(a.key,t+1)}},"Right"):l.a.createElement(b.a,{disabled:!0},"Right")," "," "))})),l.a.createElement(N.a,null,l.a.createElement("div",{className:"row"},l.a.createElement("input",{type:"text",name:"cardName",placeholder:"Add a Reward",value:e.state.cardName,onChange:e._handleChange})," "," ",l.a.createElement(b.a,{onClick:function(t,n,l,r){return e._saveCard({key:a.key},{title:e.state.cardName},{index:a.index},{e:r})}},"Save")," ")))))})),l.a.createElement(v.a,{sm:"2.5"},l.a.createElement(f.a,null,l.a.createElement(p.a,null,l.a.createElement("div",{className:"row"},l.a.createElement("input",{type:"text",name:"listName",placeholder:"Add a category",value:this.state.listName,onChange:this._handleChange})," "," ",l.a.createElement(b.a,{onClick:function(){return e._saveList()}},"Save")," "))))))}}]),t}(n.Component),L=t(71),w=t(72),S=t(73),I=t(74),K=t(85),D=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).userLogout=function(e){g.auth().signOut()},e}return Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(L.a,{color:"light",light:!0,expand:"md"},l.a.createElement(w.a,{href:"/"},l.a.createElement("h2",null,"Map the Rewards")),l.a.createElement(S.a,{navbar:!0},l.a.createElement(I.a,{className:"ml-auto",navbar:!0},l.a.createElement(K.a,{onClick:this.userLogout},"Logout")))))}}]),t}(l.a.Component),A=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(D,null)),l.a.createElement("div",null,l.a.createElement(_,null)))}}]),t}(n.Component),x=t(79),T=t(80),M=t(81),P=t(82),R=t(83),U=t(4),W=t.n(U),B=t(75),F=t(76),z=t(77),J=t(78),G=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e))._userSignIn=function(e){g.auth().signInWithEmailAndPassword(n.state.email,n.state.password).catch((function(e){console.log(e)})),n.setState({isLogined:!0}),e.preventDefault()},n._handleChange=function(e){n.setState(Object(d.a)({},e.target.name,e.target.value))},n.state={email:"",password:"",isLogined:!1},n}return Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(B.a,null,l.a.createElement("div",{className:"container"},l.a.createElement("h3",null,"Sign In"),l.a.createElement(F.a,null,l.a.createElement(z.a,null,"Email Address"),l.a.createElement(J.a,{value:this.state.email,onChange:this._handleChange,type:"email",name:"email",placeholder:"Email"})),l.a.createElement(F.a,null,l.a.createElement(z.a,null,"Password"),l.a.createElement(J.a,{value:this.state.password,onChange:this._handleChange,type:"password",name:"password",placeholder:"Password"})),l.a.createElement(b.a,{color:"success",type:"submit",onClick:this._userSignIn},"LOGIN"))))}}]),t}(n.Component),H=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e))._userSignUp=function(e){g.auth().createUserWithEmailAndPassword(n.state.email,n.state.password).catch((function(e){n.setState({message:e.message})})),e.preventDefault()},n._handleChange=function(e){n.setState(Object(d.a)({},e.target.name,e.target.value))},n.state={name:"",email:"",password:"",message:""},n}return Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(B.a,null,l.a.createElement("div",{className:"container"},l.a.createElement("h3",null,"Sign Up"),l.a.createElement(F.a,null,l.a.createElement(z.a,null,"Full Name"),l.a.createElement(J.a,{value:this.state.name,onChange:this._handleChange,type:"text",name:"name",placeholder:"Full Name"})),l.a.createElement(z.a,null,"Email Address"),l.a.createElement("br",null),l.a.createElement(J.a,{value:this.state.email,onChange:this._handleChange,type:"email",name:"email",placeholder:"Email"}),l.a.createElement("br",null),l.a.createElement(z.a,null,"Password"),l.a.createElement("br",null),l.a.createElement(J.a,{value:this.state.password,onChange:this._handleChange,type:"password",name:"password",placeholder:"Password"}),l.a.createElement("br",null),l.a.createElement(b.a,{color:"info",type:"submit",onClick:this._userSignUp},"Sign Up"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("small",null,this.state.message))))}}]),t}(n.Component),X=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).toggle=n.toggle.bind(Object(o.a)(n)),n.state={activeTab:"1"},n}return Object(i.a)(t,[{key:"toggle",value:function(e){this.state.activeTab!==e&&this.setState({activeTab:e})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container"},l.a.createElement(I.a,{tabs:!0},l.a.createElement(x.a,null,l.a.createElement(T.a,{className:W()({active:"1"===this.state.activeTab}),onClick:function(){e.toggle("1")}},"Login")),l.a.createElement(x.a,null,l.a.createElement(T.a,{className:W()({active:"2"===this.state.activeTab}),onClick:function(){e.toggle("2")}},"Register"))),l.a.createElement(M.a,{activeTab:this.state.activeTab},l.a.createElement(P.a,{tabId:"1"},l.a.createElement(R.a,null,l.a.createElement(v.a,{sm:"12"},l.a.createElement(G,null)))),l.a.createElement(P.a,{tabId:"2"},l.a.createElement(R.a,null,l.a.createElement(v.a,{sm:"12"},l.a.createElement(H,null))))))}}]),t}(l.a.Component),Y=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).authListener=function(){g.auth().onAuthStateChanged((function(e){e?n.setState({user:e}):n.setState({user:null})}))},n.state={user:{}},n.authListener=n.authListener.bind(Object(o.a)(n)),n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.authListener()}},{key:"render",value:function(){return l.a.createElement("div",null,this.state.user?l.a.createElement(A,null):l.a.createElement(X,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(59);c.a.render(l.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.416b4ea7.chunk.js.map